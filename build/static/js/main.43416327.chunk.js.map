{"version":3,"sources":["features/photos/photosSlice.js","components/auth.js","unsplash/index.js","components/Home.js","components/photo.js","App.js","app/store.js","index.js"],"names":["photosSlice","createSlice","name","initialState","data","reducers","addValues","state","action","payload","increaseLike","detailPhoto","find","item","id","likes","liked_by_user","decreaseLike","actions","Auth","unsplash","Unsplash","accessKey","secret","callbackUrl","auth","getAuthenticationUrl","localStorage","getItem","code","window","location","search","split","userAuthentication","then","res","json","setItem","access_token","setAccessTokenUnplash","setAccessToken","useSelector","photos","useState","items","setItems","dispatch","useDispatch","loadMore","start","listPhotos","toJson","newItems","concat","useEffect","length","onscroll","target","scrollTop","clientHeight","scrollHeight","scrollContainer","document","body","addEventListener","removeEventListener","listItems","map","index","className","href","user","links","html","src","profile_image","small","Date","created_at","toLocaleDateString","to","style","backgroundImage","urls","onClick","authenticationUrl","App","assign","Photo","navigate","useNavigate","useParams","regular","alt","description","toLocaleString","e","preventDefault","setBearerToken","likePhoto","display","aria-label","color","fill","height","role","viewBox","width","d","unlikePhoto","type","path","element","Home","configureStore","reducer","photosReducer","ReactDOM","render","store","getElementById"],"mappings":"iOAEaA,EAAcC,YAAY,CACrCC,KAAM,SACNC,aAAc,CACZC,KAAM,IAERC,SAAU,CACRC,UAAW,SAACC,EAAOC,GACjBD,EAAMH,KAAN,sBAAiBG,EAAMH,MAAvB,YAAgCI,EAAOC,WAEzCC,aAAc,SAACH,EAAOC,GACpB,IAAIG,EAAcJ,EAAMH,KAAKQ,MAAK,SAACC,GAAD,OAAUA,EAAKC,KAAON,EAAOC,WAC/DE,EAAYI,OAAS,EACrBJ,EAAYK,eAAiBL,EAAYK,eAE3CC,aAAc,SAACV,EAAOC,GACpB,IAAIG,EAAcJ,EAAMH,KAAKQ,MAAK,SAACC,GAAD,OAAUA,EAAKC,KAAON,EAAOC,WAC/DE,EAAYI,OAAS,EACrBJ,EAAYK,eAAiBL,EAAYK,kB,EAKUhB,EAAYkB,QAAtDZ,E,EAAAA,UAAWI,E,EAAAA,aAAcO,E,EAAAA,aAEzBjB,IAAf,Q,OCiGemB,MArHf,WACE,IAAMC,EAAW,IAAIC,IAAS,CAC5BC,UAAW,8CACXC,OAAQ,8CACRC,YAAa,+BAEWJ,EAASK,KAAKC,qBAAqB,CAC3D,SACA,gBAUkC,cAAlCC,aAAaC,QAAQ,UACa,KAAlCD,aAAaC,QAAQ,UACpBD,aAAaC,QAAQ,UAKxB,WACE,IAAMC,EAAOC,OAAOC,SAASC,OAAOC,MAAM,SAAS,GAE/CJ,GAlBwB,SAACA,GAC7BT,EAASK,KACNS,mBAAmBL,GACnBM,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACE,GAAD,OAAUV,aAAaW,QAAQ,QAASD,EAAKE,iBAenDC,CAAsBX,GAPxBY,GAWF,IAAMrC,EAAOsC,aAAY,SAACnC,GAAD,OAAWA,EAAMoC,OAAOvC,QAjCnC,EAmCYwC,mBAASxC,GAnCrB,mBAmCPyC,EAnCO,KAmCAC,EAnCA,KAqCRC,EAAWC,cAEXC,EAAW,WACf,IAAIC,EAAQpB,OAAOH,aAAaC,QAAQ,SAExCR,EAASuB,OACNQ,YAAYD,EAAQ,GAAI,GAAI,UAC5Bf,KAAKiB,UACLjB,MAAK,SAACkB,GACLvB,OAAOH,aAAaW,QAAQ,SAAUY,EAAQ,IAC9CJ,GAAS,SAACD,GAAD,OAAWA,EAAMS,OAAOD,MACjCN,EAASzC,EAAU+C,QAIzBE,qBAAU,WACY,GAAhBV,EAAMW,QACRP,MAED,IAEH,IAAMQ,EAAW,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACdA,EAAOC,UAAYD,EAAOE,cAAgBF,EAAOG,cACnDZ,KAIJM,qBAAU,WACR,IAAMO,EAAkBC,SAASC,KAGjC,OAFAF,EAAgBG,iBAAiB,SAAUR,GAEpC,WACLK,EAAgBI,oBAAoB,SAAUT,GAC9CX,EAAS,OAEV,IAEH,IAAMqB,EAAYtB,EAAMuB,KAAI,SAACvD,EAAMwD,GAAP,OAC1B,qBAAgBC,UAAU,OAA1B,UACE,sBAAKA,UAAU,YAAf,UACE,oBAAGC,KAAM1D,EAAK2D,KAAKC,MAAMC,KAAMhB,OAAO,SAAtC,UACE,qBAAKiB,IAAK9D,EAAK2D,KAAKI,cAAcC,QAClC,+BAAOhE,EAAK2D,KAAKtE,UAEnB,4BAAI,IAAI4E,KAAKjE,EAAKkE,YAAYC,uBAC9B,wCAAYnE,EAAKE,YAEnB,cAAC,IAAD,CAAMkE,GAAE,iBAAYpE,EAAKC,IAAzB,SACE,qBACEwD,UAAU,aACVY,MAAO,CAAEC,gBAAiB,OAAStE,EAAKuE,KAAKP,MAAQ,WAZlDR,MAkBX,OACE,uBAAMC,UAAU,YAAhB,UACE,wBAAQA,UAAU,SAAlB,SACE,qBAAKA,UAAU,eAAf,SACE,kDAGJ,sBAAKA,UAAU,UAAf,UACE,qBAAKA,UAAU,eAAf,SACE,oBAAIA,UAAU,OAAd,SAAsBH,MAExB,wBACEG,UAAU,YACVe,QAAS,WACPpC,KAHJ,8FC5GK7B,EAAW,IAAIC,IAAS,CACnCC,UAAW,8CACXC,OAAQ,8CACRC,YAAa,+BAGF8D,EAAoBlE,EAASK,KAAKC,qBAAqB,CAClE,SACA,gBCiBa6D,MAxBf,WAOE,OAFc5D,aAAaC,QAAQ,SAGjC,iCACE,wBAAQ0C,UAAU,SAAlB,SACE,qBAAKA,UAAU,eAAf,SACE,kDAGJ,sBAAKA,UAAU,eAAf,UACE,+IACA,wBAAQA,UAAU,cAAce,QAflB,WAClBvD,OAAOC,SAASyD,OAAOF,IAcnB,kCCbFlE,EAAW,IAAIC,IAAS,CAC5BC,UAAW,8CACXC,OAAQ,8CACRC,YAAa,+BA+FAiE,MA5Ff,WACE,IAAMC,EAAWC,cAEX7E,EAAO8E,cAAP9E,GACAiC,EAAWC,cAEXrC,EADO+B,aAAY,SAACnC,GAAD,OAAWA,EAAMoC,OAAOvC,QACxBQ,MAAK,SAACC,GAAD,OAAUA,EAAKC,KAAOA,KAepD,OACE,sBAAKwD,UAAU,OAAf,UACE,qBACEA,UAAU,WACVK,IAAKhE,EAAYyE,KAAKS,QACtBC,IAAKnF,EAAYoF,cAEnB,sBAAKzB,UAAU,YAAf,UACE,oBAAGA,UAAU,YAAb,UACE,oEACA,mBAAGC,KAAM5D,EAAY6D,KAAKC,MAAMC,KAAhC,SAAuC/D,EAAY6D,KAAKtE,UAE1D,oBAAGoE,UAAU,YAAb,UACE,2HACC,IAAIQ,KAAKnE,EAAYoE,YAAYiB,oBAEpC,sBAAK1B,UAAU,aAAf,UACE,wBACEA,UAAU,YACVe,QAhCV,SAAsBY,GACpBA,EAAEC,iBACF9E,EAASK,KAAK0E,eAAexE,aAAaC,QAAQ,UAClDR,EAASuB,OAAOyD,UAAUzF,EAAYG,IACtCiC,EAASrC,EAAaC,EAAYG,MA6B1BoE,MAAO,CACLmB,QAAU1F,EAAYK,cAAiC,OAAjB,gBAJ1C,SAOE,qBACEsF,aAAW,mDACXC,MAAM,UACNC,KAAK,UACLC,OAAO,KACPC,KAAK,MACLC,QAAQ,YACRC,MAAM,KAPR,SASE,sBAAMC,EAAE,8nBAGZ,wBACEvC,UAAU,eACVe,QA7CV,SAAyBY,GACvBA,EAAEC,iBACF9E,EAASK,KAAK0E,eAAexE,aAAaC,QAAQ,UAClDR,EAASuB,OAAOmE,YAAYnG,EAAYG,IACxCiC,EAAS9B,EAAaN,EAAYG,MA0C1BoE,MAAO,CACLmB,QAAS1F,EAAYK,cAAgB,eAAiB,QAJ1D,SAOE,qBACEsF,aAAW,iEACXC,MAAM,UACNC,KAAK,UACLC,OAAO,KACPC,KAAK,MACLC,QAAQ,YACRC,MAAM,KAPR,SASE,sBAAMC,EAAE,0RAGZ,4BAAIlG,EAAYI,cAGpB,qBAAKuD,UAAU,cAAf,SACE,wBACEyC,KAAK,SACLzC,UAAU,iBACVe,QAAS,kBAAMK,GAAU,IAH3B,wBCzEOH,EAbH,WACV,OACE,eAAC,IAAD,WACE,wBACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyB,KAAK,IAAIC,QAAS,cAACC,EAAD,MACzB,cAAC,IAAD,CAAOF,KAAK,QAAQC,QAAS,cAAC,EAAD,MAC7B,cAAC,IAAD,CAAOD,KAAK,aAAaC,QAAS,cAAC,EAAD,aCV3BE,cAAe,CAC5BC,QAAS,CACPzE,OAAQ0E,K,MCEZvF,OAAOH,aAAaW,QAAQ,QAAS,GAErCgF,IAASC,OACP,cAAC,IAAD,CAAUC,MAAOA,EAAjB,SACE,cAAC,EAAD,MAEFzD,SAAS0D,eAAe,W","file":"static/js/main.43416327.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const photosSlice = createSlice({\n  name: \"photos\",\n  initialState: {\n    data: [],\n  },\n  reducers: {\n    addValues: (state, action) => {\n      state.data = [...state.data, ...action.payload];\n    },\n    increaseLike: (state, action) => {\n      let detailPhoto = state.data.find((item) => item.id === action.payload);\n      detailPhoto.likes += 1;\n      detailPhoto.liked_by_user = !detailPhoto.liked_by_user;\n    },\n    decreaseLike: (state, action) => {\n      let detailPhoto = state.data.find((item) => item.id === action.payload);\n      detailPhoto.likes -= 1;\n      detailPhoto.liked_by_user = !detailPhoto.liked_by_user;\n    },\n  },\n});\n\nexport const { addValues, increaseLike, decreaseLike } = photosSlice.actions;\n\nexport default photosSlice.reducer;\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Unsplash, { toJson } from \"unsplash-js\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addValues } from \"../features/photos/photosSlice\";\r\n\r\nfunction Auth() {\r\n  const unsplash = new Unsplash({\r\n    accessKey: \"UNn5owZvWC7Ia3Wq6ucOuhKo-lm9qC_OGaZwbBBmt6g\",\r\n    secret: \"oirSNKhRzQ36g4X8N-uT0_UynAKtu-T2vw9Leo9tVs0\",\r\n    callbackUrl: \"http://localhost:3000/auth\",\r\n  });\r\n  const authenticationUrl = unsplash.auth.getAuthenticationUrl([\r\n    \"public\",\r\n    \"write_likes\",\r\n  ]);\r\n  const setAccessTokenUnplash = (code) => {\r\n    unsplash.auth\r\n      .userAuthentication(code)\r\n      .then((res) => res.json())\r\n      .then((json) => localStorage.setItem(\"token\", json.access_token));\r\n  };\r\n\r\n  if (\r\n    localStorage.getItem(\"token\") === \"undefined\" ||\r\n    localStorage.getItem(\"token\") === \"\" ||\r\n    !localStorage.getItem(\"token\")\r\n  ) {\r\n    setAccessToken();\r\n  }\r\n\r\n  function setAccessToken() {\r\n    const code = window.location.search.split(\"code=\")[1];\r\n\r\n    if (code) {\r\n      setAccessTokenUnplash(code);\r\n    }\r\n  }\r\n\r\n  const data = useSelector((state) => state.photos.data);\r\n\r\n  const [items, setItems] = useState(data);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const loadMore = () => {\r\n    let start = window.localStorage.getItem(\"start\");\r\n\r\n    unsplash.photos\r\n      .listPhotos(+start + 10, 10, \"latest\")\r\n      .then(toJson)\r\n      .then((newItems) => {\r\n        window.localStorage.setItem(\"start\", +start + 10);\r\n        setItems((items) => items.concat(newItems));\r\n        dispatch(addValues(newItems));\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (items.length == 0) {\r\n      loadMore();\r\n    }\r\n  }, []);\r\n\r\n  const onscroll = ({ target }) => {\r\n    if (target.scrollTop + target.clientHeight >= target.scrollHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const scrollContainer = document.body;\r\n    scrollContainer.addEventListener(\"scroll\", onscroll);\r\n\r\n    return () => {\r\n      scrollContainer.removeEventListener(\"scroll\", onscroll);\r\n      setItems([]);\r\n    };\r\n  }, []);\r\n\r\n  const listItems = items.map((item, index) => (\r\n    <li key={index} className=\"item\">\r\n      <div className=\"item-info\">\r\n        <a href={item.user.links.html} target=\"_blank\">\r\n          <img src={item.user.profile_image.small} />\r\n          <span>{item.user.name}</span>\r\n        </a>\r\n        <p>{new Date(item.created_at).toLocaleDateString()}</p>\r\n        <p>&#9829; {item.likes}</p>\r\n      </div>\r\n      <Link to={`/photo/${item.id}`}>\r\n        <div\r\n          className=\"item-image\"\r\n          style={{ backgroundImage: \"url(\" + item.urls.small + \")\" }}\r\n        ></div>\r\n      </Link>\r\n    </li>\r\n  ));\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <header className=\"header\">\r\n        <div className=\"container-my\">\r\n          <h1>Unsplash App</h1>\r\n        </div>\r\n      </header>\r\n      <div className=\"content\">\r\n        <div className=\"container-my\">\r\n          <ul className=\"list\">{listItems}</ul>\r\n        </div>\r\n        <button\r\n          className=\"load-more\"\r\n          onClick={() => {\r\n            loadMore();\r\n          }}\r\n        >\r\n          Загрузить еще\r\n        </button>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Auth;\r\n","import Unsplash from \"unsplash-js\";\r\n\r\nexport const unsplash = new Unsplash({\r\n  accessKey: \"UNn5owZvWC7Ia3Wq6ucOuhKo-lm9qC_OGaZwbBBmt6g\",\r\n  secret: \"oirSNKhRzQ36g4X8N-uT0_UynAKtu-T2vw9Leo9tVs0\",\r\n  callbackUrl: \"http://localhost:3000/auth\",\r\n});\r\n\r\nexport const authenticationUrl = unsplash.auth.getAuthenticationUrl([\r\n  \"public\",\r\n  \"write_likes\",\r\n]);\r\n\r\nexport const setAccessTokenUnplash = (code) => {\r\n  unsplash.auth\r\n    .userAuthentication(code)\r\n    .then((res) => res.json())\r\n    .then((json) => localStorage.setItem(\"token\", json.access_token));\r\n};\r\n","import React from \"react\";\r\nimport { authenticationUrl } from \"../unsplash/\";\r\n\r\nfunction App() {\r\n  const handleClick = () => {\r\n    window.location.assign(authenticationUrl);\r\n  };\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  return (\r\n    <main>\r\n      <header className=\"header\">\r\n        <div className=\"container-my\">\r\n          <h1>Unsplash App</h1>\r\n        </div>\r\n      </header>\r\n      <div className=\"registration\">\r\n        <p>Авторизация через Unsplash.com</p>\r\n        <button className=\"button_auth\" onClick={handleClick}>\r\n          Authorization\r\n        </button>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Unsplash from \"unsplash-js\";\r\nimport { decreaseLike, increaseLike } from \"../features/photos/photosSlice\";\r\n\r\nconst unsplash = new Unsplash({\r\n  accessKey: \"UNn5owZvWC7Ia3Wq6ucOuhKo-lm9qC_OGaZwbBBmt6g\",\r\n  secret: \"oirSNKhRzQ36g4X8N-uT0_UynAKtu-T2vw9Leo9tVs0\",\r\n  callbackUrl: \"http://localhost:3000/auth\",\r\n});\r\n\r\nfunction Photo() {\r\n  const navigate = useNavigate();\r\n\r\n  let { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const data = useSelector((state) => state.photos.data);\r\n  const detailPhoto = data.find((item) => item.id === id);\r\n\r\n  function likeFunction(e) {\r\n    e.preventDefault();\r\n    unsplash.auth.setBearerToken(localStorage.getItem(\"token\"));\r\n    unsplash.photos.likePhoto(detailPhoto.id);\r\n    dispatch(increaseLike(detailPhoto.id));\r\n  }\r\n  function dislikeFunction(e) {\r\n    e.preventDefault();\r\n    unsplash.auth.setBearerToken(localStorage.getItem(\"token\"));\r\n    unsplash.photos.unlikePhoto(detailPhoto.id);\r\n    dispatch(decreaseLike(detailPhoto.id));\r\n  }\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <img\r\n        className=\"card-img\"\r\n        src={detailPhoto.urls.regular}\r\n        alt={detailPhoto.description}\r\n      />\r\n      <div className=\"card-info\">\r\n        <p className=\"card-text\">\r\n          <span>Автор: </span>\r\n          <a href={detailPhoto.user.links.html}>{detailPhoto.user.name}</a>\r\n        </p>\r\n        <p className=\"card-text\">\r\n          <span>Дата публикации: </span>\r\n          {new Date(detailPhoto.created_at).toLocaleString()}\r\n        </p>\r\n        <div className=\"like-block\">\r\n          <button\r\n            className=\"likePhoto\"\r\n            onClick={likeFunction}\r\n            style={{\r\n              display: !detailPhoto.liked_by_user ? \"inline-block\" : \"none\",\r\n            }}\r\n          >\r\n            <svg\r\n              aria-label=\"Нравится\"\r\n              color=\"#262626\"\r\n              fill=\"#262626\"\r\n              height=\"24\"\r\n              role=\"img\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24\"\r\n            >\r\n              <path d=\"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z\"></path>\r\n            </svg>\r\n          </button>\r\n          <button\r\n            className=\"dislikePhoto\"\r\n            onClick={dislikeFunction}\r\n            style={{\r\n              display: detailPhoto.liked_by_user ? \"inline-block\" : \"none\",\r\n            }}\r\n          >\r\n            <svg\r\n              aria-label=\"bНе нравится\"\r\n              color=\"#ed4956\"\r\n              fill=\"#ed4956\"\r\n              height=\"24\"\r\n              role=\"img\"\r\n              viewBox=\"0 0 48 48\"\r\n              width=\"24\"\r\n            >\r\n              <path d=\"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path>\r\n            </svg>\r\n          </button>\r\n          <p>{detailPhoto.likes}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"card-bottom\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"button_go_back\"\r\n          onClick={() => navigate(-1)}\r\n        >\r\n          Back\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Photo;\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport Auth from \"./components/auth\";\nimport Home from \"./components/Home\";\nimport Photo from \"./components/photo\";\n\nconst App = () => {\n  return (\n    <Router>\n      <div></div>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/auth\" element={<Auth />} />\n        <Route path=\"/photo/:id\" element={<Photo />} />\n      </Routes>\n    </Router>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport photosReducer from \"../features/photos/photosSlice\";\n\nexport default configureStore({\n  reducer: {\n    photos: photosReducer,\n  },\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport App from \"./App\";\nimport store from \"./app/store\";\nimport \"./index.css\";\n\nwindow.localStorage.setItem(\"start\", 0);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}